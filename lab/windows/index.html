<!DOCTYPE html>
<html>
<head>
<title>Launcher</title>

<link rel="stylesheet" type="text/css" href="application.css" />

<script>
var girls, launched;

function launch() {
  if ( launched ) killAll()

  wU = Math.floor( screen.availWidth / 7 )
  hU = Math.floor( screen.availHeight / 7 )

  girls = {
    annie: window.open( 'annie', '_blank', 'width=' + wU + ',height=' + hU * 4 + ',left=' + wU + ',top=' + hU ),
    betty: window.open( 'betty', '_blank', 'width=' + wU + ',height=' + hU * 5 + ',left=' + wU * 2 + ',top=' + hU ),
    chloe: window.open( 'chloe', '_blank', 'width=' + wU + ',height=' + hU * 3 + ',left=' + wU * 3 + ',top=' + hU * 3 ),
    debby: window.open( 'debby', '_blank', 'width=' + wU + ',height=' + hU * 1 + ',left=' + wU * 4 + ',top=' + hU * 5  ),
    elly: window.open( 'elly', '_blank', 'width=' + wU + ',height=' + hU * 2 + ',left=' + wU * 5 + ',top=' + hU * 4 )
  }

  Object.keys( girls ).forEach( name => {
    let girl = girls[ name ]

    girl.girls = girls

    girl.addEventListener( 'beforeunload', () => {
      Object.keys( girls ).forEach( killing => {
        if ( killing === name ) return;
        let girl = girls[ killing ]
        girl.close()
      } )
    } )
  } )

  launched = true
}

function killAll() {
  Object.keys( girls ).forEach( name => {
    let girl = girls[ name ]
    girl.close()
  } )
}

window.addEventListener( 'beforeunload', killAll )

</script>

</head>

<body>

<button onclick="launch()">Ready?</button>

</body>
</html>
